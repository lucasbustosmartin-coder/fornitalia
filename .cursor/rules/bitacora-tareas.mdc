---
description: Actualizar bitácora Excel (Log y Resumen) al completar tareas; flujo de despliegue y versionado
alwaysApply: true
---

# Bitácora de tareas – Fornitalia

**Por defecto:** siempre actualizar la bitácora al completar una tarea. **Actualizar todas las solapas que sean necesarias** (Log, Resumen, Presupuesto, Versiones al desplegar). No saltear salvo que el usuario lo indique explícitamente (por ejemplo: "esto no agregarlo a la bitácora", "no lo registres").

Al completar una tarea relevante en este proyecto:

1. **Solapa Log**  
   Agregar una fila en el array `datosLog` de `crear-bitacora-excel.js` con: Fecha, Hora, titulo_tarea, desc_tarea, etapa.  
   Usar cuando la tarea sea un trabajo realizado (cambio, feature, corrección).

2. **Solapa Resumen**  
   Si la tarea agrega o cambia una **funcionalidad de la app** (dashboard, flujo de caja, etc.), agregar (o actualizar) la fila correspondiente en el array `funcionalidades` de `crear-bitacora-excel.js` con: Funcionalidad, Descripción.

3. **Solapa Presupuesto**  
   Si la tarea agrega o cambia un **entregable o rubro comercial** (nueva funcionalidad facturable, ampliación de alcance), agregar o actualizar el array `presupuesto` de `crear-bitacora-excel.js` con filas de la forma: Grupo, Descripción comercial, Importe sugerido (ARS). También cuando el usuario pida explícitamente ajustar o ampliar el presupuesto. Los importes son orientativos para Argentina.

4. **Regenerar Excel**  
   Después de editar el script, ejecutar:  
   `node crear-bitacora-excel.js`  
   para que `Bitacora_tareas.xlsx` tenga actualizadas **todas** las solapas modificadas (Log, Resumen, Presupuesto, Versiones).

Archivo a editar: `crear-bitacora-excel.js`.  
Salida: `Bitacora_tareas.xlsx`.

---

# Flujo cuando el usuario indique desplegar (versionado y despliegue)

Cuando el usuario diga que desplegar (ej. "desplegar", "listo desplegar", "OK desplegar"):

1. **Incrementar versión en el dashboard**  
   En `dashboard-flujo-caja.html`, actualizar la constante `APP_VERSION` (buscar `const APP_VERSION = 'X.Y'`) al **siguiente número de versión** (ej. 1.9 → 1.10). Esa versión se muestra abajo en el sidebar; el asistente la incrementa siempre que el usuario indique despliegue.

2. **Registrar versión en la bitácora**  
   En `crear-bitacora-excel.js`: agregar una fila en el array `versiones` con (Versión, Fecha, Descripción del despliegue). Usar la misma versión que `APP_VERSION` (ej. 1.10). Incluir en la descripción los cambios principales del despliegue. Si hubo tareas en la sesión, agregar también la entrada correspondiente en `datosLog` (y en `funcionalidades` si aplica).

3. **Regenerar Excel**  
   Ejecutar `node crear-bitacora-excel.js` para actualizar `Bitacora_tareas.xlsx`.

4. **Commit y push**  
   Incluir en el commit: `dashboard-flujo-caja.html` (con `APP_VERSION` actualizado), `crear-bitacora-excel.js`, `Bitacora_tareas.xlsx`. Mensaje de commit: `vX.Y: descripción breve`. Ejecutar `git add`, `git commit`, `git push origin main`. Si el push falla por credenciales, indicar al usuario que ejecute `git push origin main` en su máquina.

No hacer push / no asumir despliegue hasta que el usuario lo indique explícitamente.
